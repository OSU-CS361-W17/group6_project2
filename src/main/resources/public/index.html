<!doctype html>
<html lang="en" data-framework="intercoolerjs">
<head>
    <meta charset="utf-8">
    <title>Group_6</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="css/styles.css">
</head>
<script src="/js/vendor/jquery-1.12.4.min.js"></script>
<script src="/js/app.js"></script>



<p id="imag"><img src="Battleship.png" align="right"></p>

<table id="header">
    <tr>
    <td style="background-color:black;width=10%;text-align:center;top-border:10px;">
        <h3>Battleship</h3>
    </td>
    </tr>
</table>

<br><br><br>

<body>
<table align="middle">
    <tr>
        <th>
<section id="todoapp" ic-target="this">
    <!--#parse("/velocity/todoList.vm")-->
    <h1>Your Board</h1>
    <div id="MyBoard" class="gameBoard">
        <table id="PlayerBoard">
            <tr id="Row_1">
                <td id="1_1"></td>
                <td id="1_2"></td>
                <td id="1_3"></td>
                <td id="1_4"></td>
                <td id="1_5"></td>
                <td id="1_6"></td>
                <td id="1_7"></td>
                <td id="1_8"></td>
                <td id="1_9"></td>
                <td id="1_10"></td>
            </tr>
            <tr id="Row_2">
                <td id="2_1"></td>
                <td id="2_2"></td>
                <td id="2_3"></td>
                <td id="2_4"></td>
                <td id="2_5"></td>
                <td id="2_6"></td>
                <td id="2_7"></td>
                <td id="2_8"></td>
                <td id="2_9"></td>
                <td id="2_10"></td>
            </tr>
            <tr id="Row_3">
                <td id="3_1"></td>
                <td id="3_2"></td>
                <td id="3_3"></td>
                <td id="3_4"></td>
                <td id="3_5"></td>
                <td id="3_6"></td>
                <td id="3_7"></td>
                <td id="3_8"></td>
                <td id="3_9"></td>
                <td id="3_10"></td>
            </tr>
            <tr id="Row_4">
                <td id="4_1"></td>
                <td id="4_2"></td>
                <td id="4_3"></td>
                <td id="4_4"></td>
                <td id="4_5"></td>
                <td id="4_6"></td>
                <td id="4_7"></td>
                <td id="4_8"></td>
                <td id="4_9"></td>
                <td id="4_10"></td>
            </tr>
            <tr id="Row_5">
                <td id="5_1"></td>
                <td id="5_2"></td>
                <td id="5_3"></td>
                <td id="5_4"></td>
                <td id="5_5"></td>
                <td id="5_6"></td>
                <td id="5_7"></td>
                <td id="5_8"></td>
                <td id="5_9"></td>
                <td id="5_10"></td>
            </tr>
            <tr id="Row_6">
                <td id="6_1"></td>
                <td id="6_2"></td>
                <td id="6_3"></td>
                <td id="6_4"></td>
                <td id="6_5"></td>
                <td id="6_6"></td>
                <td id="6_7"></td>
                <td id="6_8"></td>
                <td id="6_9"></td>
                <td id="6_10"></td>
            </tr>
            <tr id="Row_7">
                <td id="7_1"></td>
                <td id="7_2"></td>
                <td id="7_3"></td>
                <td id="7_4"></td>
                <td id="7_5"></td>
                <td id="7_6"></td>
                <td id="7_7"></td>
                <td id="7_8"></td>
                <td id="7_9"></td>
                <td id="7_10"></td>
            </tr>
            <tr id="Row_8">
                <td id="8_1"></td>
                <td id="8_2"></td>
                <td id="8_3"></td>
                <td id="8_4"></td>
                <td id="8_5"></td>
                <td id="8_6"></td>
                <td id="8_7"></td>
                <td id="8_8"></td>
                <td id="8_9"></td>
                <td id="8_10"></td>
            </tr>
            <tr id="Row_9">
                <td id="9_1"></td>
                <td id="9_2"></td>
                <td id="9_3"></td>
                <td id="9_4"></td>
                <td id="9_5"></td>
                <td id="9_6"></td>
                <td id="9_7"></td>
                <td id="9_8"></td>
                <td id="9_9"></td>
                <td id="9_10"></td>
            </tr>
            <tr id="Row_10">
                <td id="10_1"></td>
                <td id="10_2"></td>
                <td id="10_3"></td>
                <td id="10_4"></td>
                <td id="10_5"></td>
                <td id="10_6"></td>
                <td id="10_7"></td>
                <td id="10_8"></td>
                <td id="10_9"></td>
                <td id="10_10"></td>
            </tr>
        </table>
    </div>
    </th>



    <th>
    <h2>Computer Board</h2>
    <div id="TheirBoard" class="gameBoard">
        <table id = "ComputerBoard">
            <tr id="Row_1">
                <td id="1_1"></td>
                <td id="1_2"></td>
                <td id="1_3"></td>
                <td id="1_4"></td>
                <td id="1_5"></td>
                <td id="1_6"></td>
                <td id="1_7"></td>
                <td id="1_8"></td>
                <td id="1_9"></td>
                <td id="1_10"></td>
            </tr>
            <tr id="Row_2">
                <td id="2_1"></td>
                <td id="2_2"></td>
                <td id="2_3"></td>
                <td id="2_4"></td>
                <td id="2_5"></td>
                <td id="2_6"></td>
                <td id="2_7"></td>
                <td id="2_8"></td>
                <td id="2_9"></td>
                <td id="2_10"></td>
            </tr>
            <tr id="Row_3">
                <td id="3_1"></td>
                <td id="3_2"></td>
                <td id="3_3"></td>
                <td id="3_4"></td>
                <td id="3_5"></td>
                <td id="3_6"></td>
                <td id="3_7"></td>
                <td id="3_8"></td>
                <td id="3_9"></td>
                <td id="3_10"></td>
            </tr>
            <tr id="Row_4">
                <td id="4_1"></td>
                <td id="4_2"></td>
                <td id="4_3"></td>
                <td id="4_4"></td>
                <td id="4_5"></td>
                <td id="4_6"></td>
                <td id="4_7"></td>
                <td id="4_8"></td>
                <td id="4_9"></td>
                <td id="4_10"></td>
            </tr>
            <tr id="Row_5">
                <td id="5_1"></td>
                <td id="5_2"></td>
                <td id="5_3"></td>
                <td id="5_4"></td>
                <td id="5_5"></td>
                <td id="5_6"></td>
                <td id="5_7"></td>
                <td id="5_8"></td>
                <td id="5_9"></td>
                <td id="5_10"></td>
            </tr>
            <tr id="Row_6">
                <td id="6_1"></td>
                <td id="6_2"></td>
                <td id="6_3"></td>
                <td id="6_4"></td>
                <td id="6_5"></td>
                <td id="6_6"></td>
                <td id="6_7"></td>
                <td id="6_8"></td>
                <td id="6_9"></td>
                <td id="6_10"></td>
            </tr>
            <tr id="Row_7">
                <td id="7_1"></td>
                <td id="7_2"></td>
                <td id="7_3"></td>
                <td id="7_4"></td>
                <td id="7_5"></td>
                <td id="7_6"></td>
                <td id="7_7"></td>
                <td id="7_8"></td>
                <td id="7_9"></td>
                <td id="7_10"></td>
            </tr>
            <tr id="Row_8">
                <td id="8_1"></td>
                <td id="8_2"></td>
                <td id="8_3"></td>
                <td id="8_4"></td>
                <td id="8_5"></td>
                <td id="8_6"></td>
                <td id="8_7"></td>
                <td id="8_8"></td>
                <td id="8_9"></td>
                <td id="8_10"></td>
            </tr>
            <tr id="Row_9">
                <td id="9_1"></td>
                <td id="9_2"></td>
                <td id="9_3"></td>
                <td id="9_4"></td>
                <td id="9_5"></td>
                <td id="9_6"></td>
                <td id="9_7"></td>
                <td id="9_8"></td>
                <td id="9_9"></td>
                <td id="9_10"></td>
            </tr>
            <tr id="Row_10">
                <td id="10_1"></td>
                <td id="10_2"></td>
                <td id="10_3"></td>
                <td id="10_4"></td>
                <td id="10_5"></td>
                <td id="10_6"></td>
                <td id="10_7"></td>
                <td id="10_8"></td>
                <td id="10_9"></td>
                <td id="10_10"></td>
            </tr>
        </table>
    </div>
    </th>
    </tr>

    <tr>
        <th>
    <h3>Place Ships:</h3>
    <div id="ShipPlacement">
        Ship:
        <select name="shipSelec" id="shipSelec">
            <option value="aircraftCarrier">Aircraft Carrier</option>
            <option value="battleship">Battleship</option>
            <option value="cruiser">Cruiser</option>
            <option value="destroyer">Destroyer</option>
            <option value="submarine">Submarine</option>
        </select>
        <br>
        Row:
        <select name="rowSelec" id="colSelec">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
        </select>
        <br>
        Column:
        <select name="colSelec" id="rowSelec">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
        </select>
        <br>
        Orientation:
        <select name="orientationSelec" id="orientationSelec">
            <option value="horizontal">horizontal</option>
            <option value="vertical">vertical</option>
        </select>
        <br>
        <button type="button" onclick="placeShip()">Place</button>
    </div>
        </th>


        <th>
    <h3>Fire:</h3>
    <div id="AircraftcarrierDiv">
        Row:
        <select name="rowFire" id="colFire">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
        </select>
        <br>
        Column:
        <select name="colFire" id="rowFire">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
        </select>
        <br>
        <button type="button" onclick="fire()">Fire</button>
    </div>
        </th>
    </tr>
</table>


</section>

<br><br>

<footer id="footer">
    <br>
    Group_6_Project_2
    <br><br>
</footer>

<br><br>

</body>

<script>
    var playerTable =   document.getElementById("PlayerBoard");
    var computerTable = document.getElementById("ComputerBoard");

    if (playerTable != null) {
        for (var i = 0; i < playerTable.rows.length; i++) {
            for (var j = 0; j < playerTable.rows[i].cells.length; j++) {
                playerTable.rows[i].cells[j].onclick = (function (i, j) {


                    return function clickPlace() {
                        //Checks if the Computer has fired at all and if so then alert the user that you can't place or move ships
                        //after you have fired a single shot.
                        if(gameModel.computerMisses.length > 0 || gameModel.computerHits.length > 0){
                            alert("You have started the game.\nYou can't place down or move ships now.");
                        }


                        // This ajax call will asnychonously call the back end, and tell it where to place the ship,
                        // then get back a game model with the ship placed, and display the new model.
                        var request = $.ajax({
                            url: "/placeShip/"+$( "#shipSelec" ).val()+"/"+(j+1)+"/"+(i+1)+"/"+$( "#orientationSelec" ).val(),
                            method: "post",
                            data: JSON.stringify(gameModel),
                            contentType: "application/json; charset=utf-8",
                            dataType: "json"
                        });


                        //This will be called when the call is returned from the server.
                        request.done(function( currModel ) {
                            displayGameState(currModel);
                            gameModel = currModel;

                        });

                        // if there is a problem, and the back end does not respond, then an alert will be shown.
                        request.fail(function( jqXHR, textStatus ) {
                            alert( "Request failed: " + textStatus );
                        });
                    };


                }(i, j));
            }
        }
    }

    if (computerTable != null) {
        for (var i = 0; i < computerTable.rows.length; i++) {
            for (var j = 0; j < computerTable.rows[i].cells.length; j++) {
                computerTable.rows[i].cells[j].onclick = (function (i, j) {


                    return function clickFire() {
                        if(gameModel.playerAircraftCarrier.start.Across < 1){
                            alert( "Place Aircraft Carrier!!!\nBefore you can fire.");
                        }
                        if(gameModel.playerBattleship.start.Across < 1){
                            alert( "Place Battleship!!!\nBefore you can fire.");
                        }
                        if(gameModel.playerCruiser.start.Across < 1){
                            alert( "Place Cruiser!!!\nBefore you can fire.");
                        }
                        if(gameModel.playerDestroyer.start.Across < 1){
                            alert( "Place Destroyer!!!\nBefore you can fire.");
                        }
                        if(gameModel.playerSubmarine.start.Across < 1){
                            alert( "Place Submarine!!!\nBefore you can fire.");
                        }


                        var request = $.ajax({
                            url: "/fire/"+(j+1)+"/"+(i+1),
                            method: "post",
                            data: JSON.stringify(gameModel),
                            contentType: "application/json; charset=utf-8",
                            dataType: "json"
                        });

                        request.done(function( currModel ) {
                            displayGameState(currModel);
                            gameModel = currModel;

                        });

                        request.fail(function( jqXHR, textStatus ) {
                            alert( "Request failed: " + textStatus );
                        });
                    };


                }(i, j));
            }
        }
    }

</script>
</html>
